<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kaito 影响力排行榜</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .app-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 20px;
            text-align: center;
            position: relative;
        }

        /* 语言切换按钮样式 */
        .language-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .lang-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
        }

        .lang-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        .app-title {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
        }

        .logo {
            font-size: 3.5rem;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .app-description {
            font-size: 1.1rem;
            opacity: 0.9;
            font-weight: 300;
            margin-bottom: 30px;
        }

        /* 导航菜单样式 */
        .main-nav {
            margin-top: 20px;
        }

        .nav-container {
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
            max-width: 800px;
            margin: 0 auto;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
            backdrop-filter: blur(10px);
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
        }

        .nav-item.active {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 20px rgba(255, 255, 255, 0.1);
        }

        .nav-icon {
            font-size: 1.5rem;
        }

        .nav-text {
            font-size: 0.9rem;
            font-weight: 600;
            text-align: center;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* 内容区域样式 */
        .content-section {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .section-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 2.2rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
        }

        .section-description {
            font-size: 1.1rem;
            color: #666;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* 开发中状态样式 */
        .coming-soon {
            text-align: center;
            padding: 80px 20px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            margin: 40px 0;
        }

        .coming-soon-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .coming-soon h3 {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 12px;
        }

        .coming-soon p {
            font-size: 1rem;
            color: #666;
            line-height: 1.6;
        }

        .controls-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 32px;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .control-group {
            display: flex;
            flex-direction: column;
            min-width: 150px;
        }

        .control-group label {
            color: white;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .control-select {
            padding: 12px 16px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-select:hover {
            background: white;
            transform: translateY(-1px);
        }

        .leaderboard-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .leaderboard-header h3 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }

        .users-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
        }

        .user-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            position: relative;
            border: 1px solid #f0f0f0;
        }

        .user-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 40px rgba(0, 0, 0, 0.12);
        }

        .rank-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(238, 90, 36, 0.3);
        }

        .user-card:nth-child(1) .rank-badge {
            background: linear-gradient(135deg, #ffd700, #ffb347);
        }

        .user-card:nth-child(2) .rank-badge {
            background: linear-gradient(135deg, #c0c0c0, #a8a8a8);
        }

        .user-card:nth-child(3) .rank-badge {
            background: linear-gradient(135deg, #cd7f32, #b8860b);
        }

        .user-avatar {
            width: 80px;
            height: 80px;
            margin: 0 auto 16px;
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #f0f0f0;
        }

        .user-info {
            text-align: center;
            margin-bottom: 20px;
        }

        .user-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #333;
            margin: 0 0 4px 0;
        }

        .user-username {
            color: #666;
            font-size: 0.9rem;
            margin: 0 0 8px 0;
        }

        .user-bio {
            color: #888;
            font-size: 0.85rem;
            line-height: 1.4;
            margin: 0;
        }

        .user-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            margin-bottom: 20px;
            gap: 12px;
        }

        .stat-item {
            text-align: center;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .stat-label {
            display: block;
            font-size: 0.75rem;
            color: #666;
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .stat-value {
            display: block;
            font-size: 1.1rem;
            font-weight: 700;
            color: #333;
        }

        .mindshare-score {
            color: #667eea;
        }

        .twitter-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: #1da1f2;
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .twitter-link:hover {
            background: #0d8bd9;
            transform: translateY(-1px);
        }

        .loading {
            text-align: center;
            padding: 60px 20px;
            font-size: 1.2rem;
            color: #666;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .app-footer {
            background: #2d3748;
            color: #a0aec0;
            text-align: center;
            padding: 24px 20px;
            font-size: 0.9rem;
        }

        .app-footer a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }

        .cors-notice {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin: 20px auto;
            max-width: 800px;
            text-align: center;
        }

        .cors-notice h4 {
            color: #856404;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .cors-notice p {
            color: #856404;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        /* 打赏区域样式 */
        .donation-section {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px auto;
            max-width: 800px;
            text-align: center;
        }

        .donation-section h4 {
            color: #166534;
            margin-bottom: 16px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .donation-addresses {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .address-item {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            padding: 16px;
            word-break: break-all;
            font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .address-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .address-content {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .address-label {
            font-weight: 600;
            color: #166534;
            font-size: 1rem;
        }

        .qr-toggle-btn {
            background: #22c55e;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .qr-toggle-btn:hover {
            background: #16a34a;
            transform: translateY(-1px);
        }

        .address-value {
            color: #1f2937;
            font-size: 0.9rem;
            background: rgba(34, 197, 94, 0.1);
            padding: 12px;
            border-radius: 8px;
            display: block;
            border: 1px solid rgba(34, 197, 94, 0.2);
        }

        .qr-code-container {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            border: 2px solid #22c55e;
            margin-top: 8px;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .qr-code-img {
            max-width: 250px;
            max-height: 250px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            border: 3px solid #fff;
        }

        .qr-error {
            color: #dc2626;
            padding: 20px;
        }

        .qr-error p {
            margin: 0 0 8px 0;
            font-weight: 600;
        }

        .qr-error small {
            color: #6b7280;
            font-size: 0.8rem;
        }

        @media (max-width: 768px) {
            .app-title {
                font-size: 2rem;
                flex-direction: column;
                gap: 8px;
            }

            .app-description {
                font-size: 1rem;
            }

            .nav-container {
                gap: 6px;
            }

            .nav-item {
                min-width: 100px;
                padding: 12px 16px;
            }

            .nav-text {
                font-size: 0.8rem;
            }

            .section-title {
                font-size: 1.8rem;
            }

            .section-description {
                font-size: 1rem;
            }

            .users-grid {
                grid-template-columns: 1fr;
            }

            .controls-section {
                flex-direction: column;
            }

            .coming-soon {
                padding: 60px 20px;
            }

            .coming-soon-icon {
                font-size: 3rem;
            }

            .donation-section {
                margin: 15px;
                padding: 16px;
            }

            .donation-section h4 {
                font-size: 1rem;
            }

            .address-item {
                padding: 12px;
            }

            .address-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .qr-toggle-btn {
                font-size: 0.8rem;
                padding: 6px 12px;
                align-self: flex-start;
            }

            .address-value {
                font-size: 0.8rem;
                padding: 10px;
            }

            .qr-code-container {
                padding: 15px;
            }

            .qr-code-img {
                max-width: 180px;
                max-height: 180px;
            }

            .language-switcher {
                top: 15px;
                right: 15px;
            }

            .lang-btn {
                padding: 8px 12px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <header class="app-header">
        <!-- 语言切换按钮 -->
        <div class="language-switcher">
            <button id="lang-btn" class="lang-btn" onclick="toggleLanguage()">
                <span id="lang-icon">🇺🇸</span>
                <span id="lang-text">EN</span>
            </button>
        </div>

        <div class="header-content">
            <h1 class="app-title">
                <span class="logo">🚀</span>
                <span data-i18n="app-title">Kaito 加密生态数据平台</span>
            </h1>
            <p class="app-description" data-i18n="app-description">
                一站式加密货币项目数据分析平台 - KOL排行榜 | ICT名单 | 奖励时间线 | 投资研报
            </p>
            
            <div class="cors-notice">
                <h4 data-i18n="cors-notice-title">🌟 实时数据版本</h4>
                <p data-i18n="cors-notice-desc">本版本直接调用 Kaito API 获取实时数据。由于浏览器安全策略，某些环境下可能显示模拟数据。</p>
            </div>
        </div>

        <!-- 导航菜单 -->
        <nav class="main-nav">
            <div class="nav-container">
                <button class="nav-item active" data-section="kol-leaderboard">
                    <span class="nav-icon">🏆</span>
                    <span class="nav-text" data-i18n="nav-kol">KOL 排行榜</span>
                </button>
                <button class="nav-item" data-section="ict-list">
                    <span class="nav-icon">📋</span>
                    <span class="nav-text" data-i18n="nav-ict">ICT 名单</span>
                </button>
                <button class="nav-item" data-section="rewards-timeline">
                    <span class="nav-icon">⏰</span>
                    <span class="nav-text" data-i18n="nav-rewards">奖励时间线</span>
                </button>
                <button class="nav-item" data-section="research-reports">
                    <span class="nav-icon">📊</span>
                    <span class="nav-text" data-i18n="nav-research">投资研报</span>
                </button>
            </div>
        </nav>

        <!-- 打赏信息 -->
        <div class="donation-section">
            <h4 data-i18n="donation-title">💝 欢迎小额打赏</h4>
            <div class="donation-addresses">
                <div class="address-item">
                    <div class="address-header">
                        <span class="address-label" data-i18n="sol-address">SOL 地址：</span>
                        <button class="qr-toggle-btn" onclick="toggleQRCode('sol-qr')" data-qr-text-show="📱 显示收款码" data-qr-text-hide="❌ 隐藏收款码" data-i18n="show-qr">📱 显示收款码</button>
                    </div>
                    <div class="address-content">
                        <span class="address-value">97vJtSUYM2BpLTo8sLXzRAU9CZGBERFBAohuFLoXGwa2</span>
                        <div id="sol-qr" class="qr-code-container" style="display: none;">
                            <img src="images/sol.png" alt="SOL 收款码" class="qr-code-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <div class="qr-error" style="display: none;">
                                <p>收款码图片未找到</p>
                                <small>请将 SOL 收款码保存为 images/sol.png</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="address-item">
                    <div class="address-header">
                        <span class="address-label" data-i18n="evm-address">EVM 地址：</span>
                        <button class="qr-toggle-btn" onclick="toggleQRCode('evm-qr')" data-qr-text-show="📱 显示收款码" data-qr-text-hide="❌ 隐藏收款码" data-i18n="show-qr">📱 显示收款码</button>
                    </div>
                    <div class="address-content">
                        <span class="address-value">0x90ea00E3c00606ee52ADD1c2468F83C927065584</span>
                        <div id="evm-qr" class="qr-code-container" style="display: none;">
                            <img src="images/evm.png" alt="EVM 收款码" class="qr-code-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <div class="qr-error" style="display: none;">
                                <p>收款码图片未找到</p>
                                <small>请将 EVM 收款码保存为 images/evm.png</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- KOL 排行榜模块 -->
        <section id="kol-leaderboard" class="content-section active">
            <div class="section-header">
                <h2 class="section-title" data-i18n="kol-title">🏆 KOL 影响力排行榜</h2>
                <p class="section-description" data-i18n="kol-description">发现加密货币领域最具影响力的 KOL 和思想领袖</p>
            </div>

            <div class="controls-section">
                <div class="control-group">
                    <label for="category-select" data-i18n="project-category">项目分类:</label>
                    <select id="category-select" class="control-select">
                        <option value="post_tge">Post TGE 项目</option>
                        <option value="pre_tge">Pre TGE 项目</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="topic-select" data-i18n="project-token">项目/代币:</label>
                    <select id="topic-select" class="control-select">
                        <option value="APT">APT</option>
                        <option value="ARB">ARB</option>
                        <option value="BERA">BERA</option>
                        <option value="DYDX">DYDX</option>
                        <option value="FUEL">FUEL</option>
                        <option value="INJ">INJ</option>
                        <option value="NEAR">NEAR</option>
                        <option value="SEI">SEI</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="duration-select" data-i18n="time-range">时间范围:</label>
                    <select id="duration-select" class="control-select">
                        <option value="7d">7 天</option>
                        <option value="30d">30 天</option>
                        <option value="3m">3 个月</option>
                        <option value="6m">6 个月</option>
                        <option value="12m">12 个月</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="top-n-select" data-i18n="display-count">显示数量:</label>
                    <select id="top-n-select" class="control-select">
                        <option value="10">Top 10</option>
                        <option value="25">Top 25</option>
                        <option value="50">Top 50</option>
                        <option value="100">Top 100</option>
                    </select>
                </div>
            </div>

            <div class="leaderboard-header">
                <h3 id="leaderboard-title">APT 影响力排行榜</h3>
                <p class="subtitle" id="leaderboard-subtitle">Post TGE 项目 - 显示过去 7 天 的前 10 名影响者</p>
            </div>

            <div id="loading" class="loading">
                <div class="loading-spinner"></div>
                <p data-i18n="loading-text">正在加载排行榜数据...</p>
            </div>
            <div id="users-grid" class="users-grid" style="display: none;"></div>
        </section>

        <!-- ICT 名单模块 -->
        <section id="ict-list" class="content-section">
            <div class="section-header">
                <h2 class="section-title" data-i18n="ict-title">📋 ICT 名单</h2>
                <p class="section-description" data-i18n="ict-description">Initial Community Token 项目列表和详细信息</p>
            </div>

            <div class="coming-soon">
                <div class="coming-soon-icon">🚧</div>
                <h3 data-i18n="coming-soon">功能开发中</h3>
                <p data-i18n="coming-soon-desc">ICT 名单功能正在开发中，敬请期待...</p>
            </div>
        </section>

        <!-- 奖励时间线模块 -->
        <section id="rewards-timeline" class="content-section">
            <div class="section-header">
                <h2 class="section-title" data-i18n="rewards-title">⏰ 项目奖励时间线</h2>
                <p class="section-description" data-i18n="rewards-description">各个项目的奖励机制和代币解锁时间安排</p>
            </div>

            <div class="coming-soon">
                <div class="coming-soon-icon">🚧</div>
                <h3 data-i18n="coming-soon">功能开发中</h3>
                <p data-i18n="coming-soon-desc">奖励时间线功能正在开发中，敬请期待...</p>
            </div>
        </section>

        <!-- 投资研报模块 -->
                <!-- 投资研报模块 -->
        <section id="research-reports" class="content-section">
            <div class="section-header">
                <h2 class="section-title" data-i18n="research-title">📊 投资机构研报</h2>
                <p class="section-description" data-i18n="research-description">收集各大投资机构的项目研究报告</p>
            </div>

            <div class="coming-soon">
                <div class="coming-soon-icon">🚧</div>
                <h3 data-i18n="coming-soon">功能开发中</h3>
                <p data-i18n="coming-soon-desc">投资研报功能正在开发中，敬请期待...</p>
            </div>
        </section>
    </main>

    <footer class="app-footer">
        <p>
            <span data-i18n="data-source">数据来源:</span> <a href="https://yaps.kaito.ai/yapper-leaderboards" target="_blank" rel="noopener noreferrer">Kaito AI</a>
        </p>
    </footer>

    <script>
        // 多语言文本数据
        const translations = {
            'zh': {
                // 页面标题和描述
                'page-title': 'Kaito 影响力排行榜',
                'app-title': 'Kaito 加密生态数据平台',
                'app-description': '一站式加密货币项目数据分析平台 - KOL排行榜 | ICT名单 | 奖励时间线 | 投资研报',
                'cors-notice-title': '🌟 实时数据版本',
                'cors-notice-desc': '本版本直接调用 Kaito API 获取实时数据。由于浏览器安全策略，某些环境下可能显示模拟数据。',
                
                // 导航菜单
                'nav-kol': 'KOL 排行榜',
                'nav-ict': 'ICT 名单',
                'nav-rewards': '奖励时间线',
                'nav-research': '投资研报',
                
                // 打赏区域
                'donation-title': '💝 欢迎小额打赏',
                'sol-address': 'SOL 地址：',
                'evm-address': 'EVM 地址：',
                'show-qr': '📱 显示收款码',
                'hide-qr': '❌ 隐藏收款码',
                
                // KOL排行榜
                'kol-title': '🏆 KOL 影响力排行榜',
                'kol-description': '发现加密货币领域最具影响力的 KOL 和思想领袖',
                'project-category': '项目分类:',
                'project-token': '项目/代币:',
                'time-range': '时间范围:',
                'display-count': '显示数量:',
                'post-tge': 'Post TGE 项目',
                'pre-tge': 'Pre TGE 项目',
                'days-7': '7 天',
                'days-30': '30 天',
                'months-3': '3 个月',
                'months-6': '6 个月',
                'months-12': '12 个月',
                'loading-text': '正在加载排行榜数据...',
                'influence-score': '影响力分数',
                'followers': '粉丝数',
                'following': '关注数',
                'smart-followers': '智能粉丝',
                
                // 其他页面
                'ict-title': '📋 ICT 名单',
                'ict-description': 'Initial Community Token 项目列表和详细信息',
                'rewards-title': '⏰ 项目奖励时间线',
                'rewards-description': '各个项目的奖励机制和代币解锁时间安排',
                'research-title': '📊 投资机构研报',
                'research-description': '收集各大投资机构的项目研究报告',
                'coming-soon': '功能开发中',
                'coming-soon-desc': '功能正在开发中，敬请期待...',
                
                // 页脚
                'data-source': '数据来源:'
            },
            'en': {
                // 页面标题和描述
                'page-title': 'Kaito Influence Leaderboard',
                'app-title': 'Kaito Crypto Ecosystem Data Platform',
                'app-description': 'One-stop cryptocurrency project data analysis platform - KOL Rankings | ICT Lists | Reward Timeline | Investment Reports',
                'cors-notice-title': '🌟 Real-time Data Version',
                'cors-notice-desc': 'This version directly calls Kaito API for real-time data. Due to browser security policies, simulated data may be displayed in some environments.',
                
                // 导航菜单
                'nav-kol': 'KOL Rankings',
                'nav-ict': 'ICT Lists',
                'nav-rewards': 'Reward Timeline',
                'nav-research': 'Research Reports',
                
                // 打赏区域
                'donation-title': '💝 Welcome Small Tips',
                'sol-address': 'SOL Address:',
                'evm-address': 'EVM Address:',
                'show-qr': '📱 Show QR Code',
                'hide-qr': '❌ Hide QR Code',
                
                // KOL排行榜
                'kol-title': '🏆 KOL Influence Leaderboard',
                'kol-description': 'Discover the most influential KOLs and thought leaders in the cryptocurrency space',
                'project-category': 'Project Category:',
                'project-token': 'Project/Token:',
                'time-range': 'Time Range:',
                'display-count': 'Display Count:',
                'post-tge': 'Post TGE Projects',
                'pre-tge': 'Pre TGE Projects',
                'days-7': '7 Days',
                'days-30': '30 Days',
                'months-3': '3 Months',
                'months-6': '6 Months',
                'months-12': '12 Months',
                'loading-text': 'Loading leaderboard data...',
                'influence-score': 'Influence Score',
                'followers': 'Followers',
                'following': 'Following',
                'smart-followers': 'Smart Followers',
                
                // 其他页面
                'ict-title': '📋 ICT Lists',
                'ict-description': 'Initial Community Token project lists and detailed information',
                'rewards-title': '⏰ Project Reward Timeline',
                'rewards-description': 'Reward mechanisms and token unlock schedules for various projects',
                'research-title': '📊 Investment Institution Reports',
                'research-description': 'Collect project research reports from major investment institutions',
                'coming-soon': 'Feature Under Development',
                'coming-soon-desc': 'This feature is under development, stay tuned...',
                
                // 页脚
                'data-source': 'Data Source:'
            }
        };

        // 当前语言
        let currentLanguage = localStorage.getItem('language') || 'zh';

        // 切换语言函数
        function toggleLanguage() {
            currentLanguage = currentLanguage === 'zh' ? 'en' : 'zh';
            localStorage.setItem('language', currentLanguage);
            updateLanguage();
        }

        // 更新页面语言
        function updateLanguage() {
            const t = translations[currentLanguage];
            
            // 更新页面标题
            document.title = t['page-title'];
            
            // 更新语言切换按钮
            const langIcon = document.getElementById('lang-icon');
            const langText = document.getElementById('lang-text');
            if (currentLanguage === 'zh') {
                langIcon.textContent = '🇺🇸';
                langText.textContent = 'EN';
            } else {
                langIcon.textContent = '🇨🇳';
                langText.textContent = '中文';
            }
            
            // 更新所有具有 data-i18n 属性的元素
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (t[key]) {
                    element.textContent = t[key];
                }
            });
            
            // 更新项目分类选项
            updateProjectCategoryOptions();
            
            // 更新时间范围选项
            updateTimeRangeOptions();
            
            // 更新显示数量选项
            updateDisplayCountOptions();
            
            // 更新排行榜标题
            updateLabels();
            
            // 重新渲染当前数据
            if (currentData.length > 0) {
                renderUsers(currentData);
            }
        }

        // 更新项目分类选项
        function updateProjectCategoryOptions() {
            const categorySelect = document.getElementById('category-select');
            const t = translations[currentLanguage];
            
            categorySelect.innerHTML = `
                <option value="post_tge">${t['post-tge']}</option>
                <option value="pre_tge">${t['pre-tge']}</option>
            `;
        }

        // 更新时间范围选项
        function updateTimeRangeOptions() {
            const durationSelect = document.getElementById('duration-select');
            const t = translations[currentLanguage];
            
            durationSelect.innerHTML = `
                <option value="7d">${t['days-7']}</option>
                <option value="30d">${t['days-30']}</option>
                <option value="3m">${t['months-3']}</option>
                <option value="6m">${t['months-6']}</option>
                <option value="12m">${t['months-12']}</option>
            `;
        }

        // 更新显示数量选项
        function updateDisplayCountOptions() {
            const topNSelect = document.getElementById('top-n-select');
            
            topNSelect.innerHTML = `
                <option value="10">Top 10</option>
                <option value="25">Top 25</option>
                <option value="50">Top 50</option>
                <option value="100">Top 100</option>
            `;
        }

        // 项目分类数据
        const projectCategories = {
            'pre_tge': {
                label: 'Pre TGE 项目',
                topics: ["0G", "ALLORA", "ANOMA", "BILLIONS", "BLS", "BOUNDLESS", "CAMP", "CYSIC", "FALCON", "FOGO", "HANAHANA",
                        "GOATNETWORK", "INFINEX", "INFINIT", "IRYS", "KAT", "LOMBARD", "LUMITERRA", "MEGAETH",
                        "MEMEX", "MIRA", "MITOSIS", "MOMENTUM", "MONAD", "MULTIBANK", "MULTIPLI", "NYT", "NOYA", "OPENLEDGER",
                        "PARADEX", "PORTALPORTAL", "PUFFPAW", "SAPIEN", "SOMNIA", "SO",
                        "SURF", "SYMPHONY", "THEORIQ", "THRIVE", "TURTLECLUB", "UNION", "WARP", "YEET"]
            },
            'post_tge': {
                label: 'Post TGE 项目',
                topics: ["KAITO", "ANIME", "APT", "ARB", "BERA", "BLUE", "BOOPBOOPFUN", "BYBITTRADFI", "CALDERA",
                        "CORN", "CREATORBID", "DEFIAPP", "DYDX", "ECLIPSE", "FRAX", "FUEL", "HUMAFINANCE",
                        "HUMANITY", "INITIA", "INJ", "IQ", "KAIA", "KINTO", "MNT", "OM", "MAPLESTORYUNIVERSE",
                        "MOVEMENT", "NEAR", "NEWTON", "ORDERLYNETWORK", "PEAQ", "PENGU", "DOT", "POL", "PYTH",
                        "QUAI", "SATLAYER", "SEI", "SIDEKICK", "SKATE", "S", "SOON", "SOPHON", "STARKNET", "STORYPROTOCOL", "SUCCINCT", "UXLINK",
                        "VIRTUALECOSYSTEM", "WAL", "WAYFINDER", "XION", "ZEC"]
            }
        };

        // 生成不同项目的模拟数据
        function generateMockData(topic, count = 10) {
            const names = [
                'Vitalik Buterin', 'Changpeng Zhao', 'Elon Musk', 'Michael Saylor',
                'Cathie Wood', 'Anthony Pompliano', 'Andreas Antonopoulos', 'Naval Ravikant',
                'Balaji Srinivasan', 'Lex Fridman', 'Tim Draper', 'Barry Silbert',
                'Cameron Winklevoss', 'Tyler Winklevoss', 'Brian Armstrong', 'Gavin Wood',
                'Charles Hoskinson', 'Dan Larimer', 'Justin Sun', 'Roger Ver',
                'Erik Voorhees', 'Tone Vays', 'Max Keiser', 'Stacy Herbert',
                'Preston Pysh', 'Robert Kiyosaki', 'Peter Schiff', 'Raoul Pal'
            ];

            return Array.from({ length: count }, (_, index) => ({
                user_id: `${topic}-user-${index}`,
                name: names[index % names.length] || `${topic} Expert ${index + 1}`,
                username: `${topic.toLowerCase()}expert${index + 1}`,
                icon: `https://ui-avatars.com/api/?name=${encodeURIComponent(names[index % names.length] || `${topic} Expert ${index + 1}`)}&background=random`,
                bio: `${topic} enthusiast and thought leader in the crypto space. Passionate about blockchain technology.`,
                following_count: Math.floor(Math.random() * 5000) + 500,
                follower_count: Math.floor(Math.random() * 100000) + 10000,
                smart_follower_count: Math.floor(Math.random() * 50) + 5,
                mindshare: Math.random() * 0.1,
                rank: index + 1,
                twitter_user_url: `https://x.com/${topic.toLowerCase()}expert${index + 1}`
            }));
        }

        // 当前显示的数据
        let currentData = [];

        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }

        function renderUsers(users) {
            const grid = document.getElementById('users-grid');
            const loading = document.getElementById('loading');
            const t = translations[currentLanguage];

            // 重置加载状态的内容（如果之前显示了错误信息）
            loading.innerHTML = `<div class="loading-spinner"></div><p>${t['loading-text']}</p>`;
            loading.style.display = 'none';
            grid.style.display = 'grid';
            
            grid.innerHTML = users.map((user, index) => `
                <div class="user-card">
                    <div class="rank-badge">#${user.rank}</div>
                    
                    <div class="user-avatar">
                        <img src="${user.icon}" alt="${user.name}" 
                             onerror="this.src='https://ui-avatars.com/api/?name=${encodeURIComponent(user.name)}&background=random'">
                    </div>

                    <div class="user-info">
                        <h3 class="user-name">${user.name}</h3>
                        <p class="user-username">@${user.username}</p>
                        <p class="user-bio">${user.bio}</p>
                    </div>

                    <div class="user-stats">
                        <div class="stat-item">
                            <span class="stat-label">${t['influence-score']}</span>
                            <span class="stat-value mindshare-score">${(user.mindshare * 100).toFixed(2)}%</span>
                        </div>
                        
                        <div class="stat-item">
                            <span class="stat-label">${t['followers']}</span>
                            <span class="stat-value">${formatNumber(user.follower_count)}</span>
                        </div>

                        <div class="stat-item">
                            <span class="stat-label">${t['following']}</span>
                            <span class="stat-value">${formatNumber(user.following_count)}</span>
                        </div>

                        <div class="stat-item">
                            <span class="stat-label">${t['smart-followers']}</span>
                            <span class="stat-value">${formatNumber(user.smart_follower_count)}</span>
                        </div>
                    </div>

                    <div class="user-actions">
                        <a href="${user.twitter_user_url}" target="_blank" rel="noopener noreferrer" class="twitter-link">
                            🐦 Twitter
                        </a>
                    </div>
                </div>
            `).join('');
        }

        // 更新项目选择器
        function updateTopicSelect(category) {
            const topicSelect = document.getElementById('topic-select');
            const topics = projectCategories[category].topics;

            topicSelect.innerHTML = '';
            topics.forEach(topic => {
                const option = document.createElement('option');
                option.value = topic;
                option.textContent = topic;
                topicSelect.appendChild(option);
            });
        }

        // 尝试调用真实的 Kaito API，如果失败则使用模拟数据
        async function fetchKaitoData(duration, topic_id, top_n) {
            const url = "https://hub.kaito.ai/api/v1/gateway/ai/kol/mindshare/top-leaderboard";
            const params = new URLSearchParams({
                duration: duration,
                topic_id: topic_id,
                top_n: top_n.toString(),
                community_tier: 'tier1',
                customized_community: 'customized',
                community_yaps: 'true'
            });

            try {
                const response = await fetch(`${url}?${params}`, {
                    method: 'GET',
                    mode: 'cors',
                    headers: {
                        'Accept': 'application/json',
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();

                // 处理 API 返回的数据，确保格式正确
                if (Array.isArray(data) && data.length > 0) {
                    return data.map((user, index) => ({
                        user_id: user.user_id || `user-${index}`,
                        name: user.name || 'Unknown User',
                        username: user.username || '',
                        icon: user.icon || `https://ui-avatars.com/api/?name=${encodeURIComponent(user.name || 'User')}&background=random`,
                        bio: user.bio || '',
                        following_count: user.following_count || 0,
                        follower_count: user.follower_count || 0,
                        smart_follower_count: user.smart_follower_count || 0,
                        mindshare: user.mindshare || 0,
                        rank: user.rank || (index + 1),
                        twitter_user_url: user.twitter_user_url || '#'
                    }));
                } else {
                    throw new Error('Empty or invalid API response');
                }
            } catch (error) {
                console.warn('API调用失败，使用模拟数据:', error.message);
                // 如果 API 调用失败，使用模拟数据
                return generateMockData(topic_id, top_n);
            }
        }

        // 加载数据
        async function loadData() {
            const category = document.getElementById('category-select').value;
            const topic = document.getElementById('topic-select').value;
            const duration = document.getElementById('duration-select').value;
            const topN = parseInt(document.getElementById('top-n-select').value);

            // 显示加载状态
            document.getElementById('loading').style.display = 'block';
            document.getElementById('users-grid').style.display = 'none';

            try {
                // 尝试调用真实的 Kaito API
                currentData = await fetchKaitoData(duration, topic, topN);
                renderUsers(currentData);
                updateLabels();
            } catch (error) {
                console.error('Failed to load data:', error);
                // 如果出错，显示错误信息
                document.getElementById('loading').innerHTML = '<p style="color: red;">加载数据失败，显示模拟数据</p>';
                setTimeout(() => {
                    currentData = generateMockData(topic, topN);
                    renderUsers(currentData);
                    updateLabels();
                }, 1000);
            }
        }

        // 更新标题和副标题
        function updateLabels() {
            const category = document.getElementById('category-select').value;
            const topic = document.getElementById('topic-select').value;
            const duration = document.getElementById('duration-select').value;
            const topN = document.getElementById('top-n-select').value;
            const t = translations[currentLanguage];

            const durationLabels = {
                'zh': {
                    '7d': '7 天',
                    '30d': '30 天',
                    '3m': '3 个月',
                    '6m': '6 个月',
                    '12m': '12 个月'
                },
                'en': {
                    '7d': '7 Days',
                    '30d': '30 Days',
                    '3m': '3 Months',
                    '6m': '6 Months',
                    '12m': '12 Months'
                }
            };

            const categoryLabels = {
                'zh': {
                    'post_tge': 'Post TGE 项目',
                    'pre_tge': 'Pre TGE 项目'
                },
                'en': {
                    'post_tge': 'Post TGE Projects',
                    'pre_tge': 'Pre TGE Projects'
                }
            };

            const titleText = currentLanguage === 'zh' ? 
                `🏆 ${topic} 影响力排行榜` : 
                `🏆 ${topic} Influence Leaderboard`;
            
            const subtitleText = currentLanguage === 'zh' ?
                `${categoryLabels[currentLanguage][category]} - 显示过去 ${durationLabels[currentLanguage][duration]} 的前 ${topN} 名影响者` :
                `${categoryLabels[currentLanguage][category]} - Showing Top ${topN} influencers in the past ${durationLabels[currentLanguage][duration]}`;

            document.getElementById('leaderboard-title').textContent = titleText;
            document.getElementById('leaderboard-subtitle').textContent = subtitleText;
            
            // 更新QR码按钮文字
            updateQRButtonTexts();
        }

        // 更新QR码按钮文字
        function updateQRButtonTexts() {
            const t = translations[currentLanguage];
            document.querySelectorAll('.qr-toggle-btn').forEach(button => {
                const container = button.getAttribute('onclick').match(/toggleQRCode\('([^']+)'\)/)[1];
                const qrContainer = document.getElementById(container);
                if (qrContainer.style.display === 'none') {
                    button.textContent = t['show-qr'];
                } else {
                    button.textContent = t['hide-qr'];
                }
            });
        }

        // 导航切换功能
        function switchSection(sectionId) {
            // 隐藏所有内容区域
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });

            // 显示选中的内容区域
            document.getElementById(sectionId).classList.add('active');

            // 更新导航按钮状态
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-section="${sectionId}"]`).classList.add('active');
        }

        // 添加导航事件监听
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                const sectionId = this.getAttribute('data-section');
                switchSection(sectionId);
            });
        });

        // 添加控制器事件监听
        document.getElementById('category-select').addEventListener('change', function() {
            updateTopicSelect(this.value);
            loadData();
        });

        document.getElementById('topic-select').addEventListener('change', loadData);
        document.getElementById('duration-select').addEventListener('change', loadData);
        document.getElementById('top-n-select').addEventListener('change', loadData);

        // 切换收款码显示
        function toggleQRCode(qrId) {
            const qrContainer = document.getElementById(qrId);
            const button = event.target;
            const t = translations[currentLanguage];
            
            if (qrContainer.style.display === 'none' || qrContainer.style.display === '') {
                qrContainer.style.display = 'block';
                button.textContent = t['hide-qr'];
            } else {
                qrContainer.style.display = 'none';
                button.textContent = t['show-qr'];
            }
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化语言
            updateLanguage();
            // 初始化其他功能
            updateTopicSelect('post_tge');
            loadData();
        });
    </script>
</body>
</html>
